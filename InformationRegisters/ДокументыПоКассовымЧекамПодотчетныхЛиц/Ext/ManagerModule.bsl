
#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда
	
#Область ПрограммныйИнтерфейс

// Устанавливает связь между чеком и документом. Процедура выполняется при записи в модуле объекта документа.
//
// Параметры:
//  Запрос	 - Запрос - см. ОбновитьДокументыПоКассовымЧекамПодотчетныхЛиц в модуле объекта документа
//  Ссылка	 - ДокументСсылка - ссылка на документ
//
Процедура ОбновитьДокументыПоКассовымЧекамПодотчетныхЛиц(ТекстЗапроса, Ссылка) Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст = ТекстЗапроса;
	Запрос.УстановитьПараметр("Ссылка", Ссылка);
	РезультатЗапроса = Запрос.Выполнить();
	
	ТаблицаЧеков = РезультатЗапроса.Выгрузить();
	ТаблицаЧеков.Колонки.Добавить("Документ");
	ТаблицаЧеков.ЗаполнитьЗначения(Ссылка, "Документ");
	
	НаборЗаписей = СоздатьНаборЗаписей();
	НаборЗаписей.Отбор.Документ.Установить(Ссылка);
	НаборЗаписей.Загрузить(ТаблицаЧеков);
	
	НаборЗаписей.Записать();
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли
